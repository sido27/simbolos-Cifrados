<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <style>
    #datos2 {
      float: right;
    }

    #button {
      width: 80%;
    }

    #div,
    #div2 {
      text-align: center;
    }
  </style>
</head>

<body>
  <textarea id="datos" rows="10" cols="40"></textarea>
  <textarea id="datos2" rows="10" cols="40"> </textarea>
  <br />
  <br />
  <div id="div">
    <button id="encrypt">ENCRYPT</button>
  </div>
  <BR></BR>
  <div id="div2">
    <button id="decrypt">DECRYPT</button>
  </div>
</body>
<script src="./cifrado.js"></script>

<script>




  let simbolo = [];
  let codigo = [];
  for (i = 14; i < cifrado.length; i = i + 31) {
    simbolo.push(cifrado[i]);
    codigo.push(cifrado[i + 14] + cifrado[i + 15]);
  }


  


  let btnEncrypt = document.getElementById("encrypt")
  let btnDecrypt = document.getElementById("decrypt")


  btnEncrypt.addEventListener("click", function () {

    let textoCifrado = "";
    let texto = document.getElementById("datos");
    text = texto.value;
    text = text.toUpperCase();

    
    for (i in text) {
      for (j in simbolo) {
        if (text[i] == simbolo[j]) {
          textoCifrado += codigo[j] + " ";
        } else if (!simbolo.includes(text[i])) {
          textoCifrado += "*" + " ";
          break;
        }
      }
    }

    document.getElementById("datos2").innerHTML = textoCifrado;


  })





  btnDecrypt.addEventListener("click", function () {
    let textoEncryptado = "";
    let texto2 = document.getElementById("datos2");
    text2 = texto2.value;
    text2 = text2.split(" ")
       console.log(text2);
    for ( i in text2)
    {
      for ( j in codigo)
      {
        if ( text2[i] == codigo[j])
        {
          textoEncryptado += simbolo[j] 
        }
       
        else if (text2[i] == "*") {
          textoEncryptado += "*" ;
          break;
        }
      }
    }
    

    document.getElementById("datos").innerHTML = textoEncryptado;
  })
</script>

</html>